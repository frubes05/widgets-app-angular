<mat-card class="pokemon-page">
  @if (pokemons$ | async; as pokemons) {
  <table
    mat-table
    [dataSource]="pokemons"
    class="pokemon-page__table mat-elevation-z8"
  >
    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef class="pokemon-page__table-header">
        ID
      </th>
      <td mat-cell *matCellDef="let p" class="pokemon-page__table-cell">
        {{ p.id }}
      </td>
    </ng-container>

    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef class="pokemon-page__table-header">
        Naziv
      </th>
      <td mat-cell *matCellDef="let p" class="pokemon-page__table-cell">
        {{ p.name | titlecase }}
      </td>
    </ng-container>

    <ng-container matColumnDef="height">
      <th mat-header-cell *matHeaderCellDef class="pokemon-page__table-header">
        Visina
      </th>
      <td mat-cell *matCellDef="let p" class="pokemon-page__table-cell">
        {{ p.height }}
      </td>
    </ng-container>

    <ng-container matColumnDef="weight">
      <th mat-header-cell *matHeaderCellDef class="pokemon-page__table-header">
        Te≈æina
      </th>
      <td mat-cell *matCellDef="let p" class="pokemon-page__table-cell">
        {{ p.weight }}
      </td>
    </ng-container>

    <ng-container matColumnDef="types">
      <th mat-header-cell *matHeaderCellDef class="pokemon-page__table-header">
        Tip
      </th>
      <td mat-cell *matCellDef="let p" class="pokemon-page__table-cell">
        @for (t of p.types; track t; let $ls = $last) {
        {{ t }}
        @if (!$ls) {
        <span>, </span>
        } }
      </td>
    </ng-container>

    <ng-container matColumnDef="image">
      <th mat-header-cell *matHeaderCellDef class="pokemon-page__table-header">
        Slika
      </th>
      <td mat-cell *matCellDef="let p" class="pokemon-page__table-cell">
        <img
          [src]="p.image"
          width="50"
          height="50"
          alt="{{ p.name }}"
          class="pokemon-page__image"
        />
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr
      mat-row
      *matRowDef="let pokemon; columns: displayedColumns"
      (click)="goToPokemonDetails(pokemon.name)"
      tabindex
      class="pokemon-page__row"
    ></tr>
  </table>

  <div class="pokemon-page__pagination">
    <awa-pagination
      (pageChange)="loadNextPokemonBatch($event)"
    ></awa-pagination>
  </div>
  } @else {
  <awa-data-table-skeleton [rowsLength]="10" [columns]="displayedColumns" />
  }
</mat-card>
